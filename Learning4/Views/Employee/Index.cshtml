@model Learning4.Models.Employees.AddEmployeeModel


<style>
    .dt-layout-row .dt-layout-start {
        display:flex;
        margin:10px;
        justify-content:space-between;
    }

    .dt-layout-start .dt-layout-end {
        width: 50%;
    }


</style>
<div class="container">
    <h2>Add Employee</h2>
    <form asp-action="Index" method="post" enctype="multipart/form-data">
        <div class="row">
            <div class="col-sm-4">
                <div class="form-group">
                    <label asp-for="Name"></label>
                    <input asp-for="Name" class="form-control me-sm-2" />
                    <span asp-validation-for="Name" class="text-danger"></span>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="form-group">
                    <label asp-for="RoleId"></label>
                    <select asp-for="RoleId" asp-items="ViewBag.Roles" class="form-control me-sm-2">
                        <option value="">-- Select Role --</option>
                    </select>
                    <span asp-validation-for="RoleId" class="text-danger"></span>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="form-group">
                    <label asp-for="Salary"></label>
                    <input asp-for="Salary" type="number" class="form-control me-sm-2" />
                    <span asp-validation-for="Salary" class="text-danger"></span>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="form-group">
                    <label asp-for="DateOfJoining"></label>
                    <input asp-for="DateOfJoining" class="form-control me-sm-2" />
                    <span asp-validation-for="DateOfJoining" class="text-danger"></span>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="form-group">
                    <label asp-for="Email"></label>
                    <input asp-for="Email" class="form-control me-sm-2" />
                    <span asp-validation-for="Email" class="text-danger"></span>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="form-group">
                    <label asp-for="PhoneNumber"></label>
                    <input asp-for="PhoneNumber" class="form-control me-sm-2" />
                    <span asp-validation-for="PhoneNumber" class="text-danger"></span>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="form-group">
                    <label asp-for="Address"></label>
                    <input asp-for="Address" class="form-control me-sm-2" />
                    <span asp-validation-for="Address" class="text-danger"></span>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="form-group">
                    <label asp-for="CollegeId"></label>
                    <select asp-for="CollegeId" asp-items="ViewBag.Colleges" class="form-control me-sm-2">
                        <option value="">-- Select College --</option>
                    </select>
                    <span asp-validation-for="CollegeId" class="text-danger"></span>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="form-group">
                    <label asp-for="DistrictID"></label>
                    <select asp-for="DistrictID" asp-items="ViewBag.Districts" class="form-control me-sm-2">
                        <option value="">-- Select District --</option>
                    </select>
                    <span asp-validation-for="DistrictID" class="text-danger"></span>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="form-group">
                    <label asp-for="AdhaarNumber"></label>
                    <input asp-for="AdhaarNumber" type="number" class="form-control me-sm-2" />
                    <span asp-validation-for="AdhaarNumber" class="text-danger"></span>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="form-group">
                    <label asp-for="PANNumber"></label>
                    <input asp-for="PANNumber" type="text" class="form-control me-sm-2" />
                    <span asp-validation-for="PANNumber" class="text-danger"></span>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="form-group">
                    <label asp-for="Passport_Document"></label>
                    <input asp-for="Passport_Document" type="file" class="form-control me-sm-2" />
                    <span asp-validation-for="Passport_Document" class="text-danger"></span>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="form-group">
                    <label asp-for="BloodGroup"></label>
                    <select asp-for="BloodGroup" class="form-control me-sm-2">
                        <option value="">-- Select Blood Group --</option>
                        <option value="A+">A+</option>
                        <option value="A-">A-</option>
                        <option value="B+">B+</option>
                        <option value="B-">B-</option>
                        <option value="AB+">AB+</option>
                        <option value="AB-">AB-</option>
                        <option value="O+">O+</option>
                        <option value="O-">O-</option>
                    </select>
                    <span asp-validation-for="BloodGroup" class="text-danger"></span>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="form-group">
                    <label asp-for="Singnature_Document"></label>
                    <input asp-for="Singnature_Document" type="file" class="form-control me-sm-2" />
                    <span asp-validation-for="Singnature_Document" class="text-danger"></span>
                </div>
            </div>
        </div>

        <button type="submit" class="btn btn-primary">Add</button>
    </form>
    <table class="table table-responsive" id="tblEmployeeDetails">
        <thead>
            <tr>
                <td>S.No</td>
                <th>Employee Name</th>
                <th>Employee ID</th>
                <th>Email</th>
                <th>Joining Date</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            
        </tbody>
    </table>
    <link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css" />
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
    <script>

        var jq1 = jQuery.noConflict();
        jq1(document).ready(function () {
            jq1('input[name="DateOfJoining"]').attr('type', 'date');
            // jq1('#BloodGroup,#CollegeId,#RoleId,#DistrictID').select2({
            //     width:'100%'
            // });
             
             $('#tblEmployeeDetails').DataTable({
                ajax: {
                    url: '@Url.Action("GetEmployees", "Coupon")',
                    dataSrc: function (json) {
                        console.log("Response from GetEmployees:", json); // 🔍 log full response
                        return json; // must return the data array
                    }
                },
                columns: [
                    { "data": null, "render": function (data, type, row, meta) { return meta.row + 1; } },
                    { "data": "name" },
                    { "data": "employeeId" },
                    { "data": "email" },
                    { "data": "dateOfJoining", "render": function (data) { return new Date(data).toLocaleDateString(); } },
                    { "data": null, "render": function (data, type, row) {
                        return '<a href="/Employee/Edit/' + row.id + '" class="btn btn-sm btn-primary">Edit</a> ' +
                               ` <form asp-action="CancelLeave" method="post" style="display:inline;">
                                    <input type="hidden" name="id" value="${leave.LeaveId}" />
                                     <button type="submit" class="btn btn-danger btn-sm">Cancel</button>
                                 </form>`;
                    }}
                ],
                language: {
                        search: "_INPUT_",
                        searchPlaceholder: "Search Colleges..."
                    }
            });
        });

</script>
</div>